dbo_crown_harem_marry = {
	sound = UI_action_character_marry_noble
	is_consort_action = yes
	on_own_nation = yes
	context_menu_click_mode = click
	message = no
	ai_tick = daily
	ai_tick_frequency = 40
	potential = {
		scope:actor = {
			tag = TUR
		}
	}
	allow = {
	}
	select_trigger = {
		looking_for_a = character
		source = actor
		target_flag = recipient
		name = "choose_character"
		column = {
			data = name
		}
		visible = {
			is_alive = yes
			is_adult = yes
			is_female = no
			has_estate = estate_type:crown_estate
		}
		enabled = {
			is_alive = yes
			is_adult = yes
			is_female = no
			has_estate = estate_type:crown_estate
			total_abilities > 120
			has_available_marriage_slot = yes
		}
	}
	effect = {
		scope:actor = {
			custom_tooltip = "dbo_crown_harem_marry_tt"
			hidden_effect = {
				create_character = {
					culture = scope:actor.culture
					religion = scope:actor.religion
					female = yes
					estate = estate_type:crown_estate
					adm = {
						value = {
							add = {
								30
								50
							}
							add = {
								value = scope:recipient.adm
								divide = 2
							}
							max = 100
						}
					}
					dip = {
						value = {
							add = {
								30
								50
							}
							add = {
								value = scope:recipient.dip
								divide = 2
							}
							max = 100
						}
					}
					mil = {
						value = {
							add = {
								30
								50
							}
							add = {
								value = scope:recipient.mil
								divide = 2
							}
							max = 100
						}
					}
					age = 16
					fertility = 100
					add_character_modifier = {
						modifier = banned_from_cabinet
						years = modifier_duration_permanent
						mode = add_and_extend
					}
					marry_character = scope:recipient
				}
			}
		}
	}
	ai_will_do = {
		add = {
			if = {
				limit = {
					scope:recipient ?= {
						OR = {
							has_available_marriage_slot = no
							total_abilities <= 120
						}
					}
				}
				value = -1000
			}
		}
		add = {
			value = 4
			subtract = scope:recipient.num_of_spouses
			multiply = 25
		}
		add = {
			if = {
				limit = {
					scope:recipient = {
						is_ruler = yes
					}
				}
				value = 300
			}
		}
		add = {
			if = {
				limit = {
					scope:recipient = {
						OR = {
							is_heir = yes
							AND = {
								exists = father
								father = {
									is_ruler = yes
								}
							}
							AND = {
								exists = mother
								mother = {
									is_ruler = yes
								}
							}
						}
					}
				}
				value = scope:recipient.age_in_years
				subtract = 10
				multiply = 5
			}
		}
		add = {
			if = {
				limit = {
					scope:recipient = {
						OR = {
							is_heir = no
							AND = {
								exists = father
								father = {
									is_heir = yes
								}
							}
							AND = {
								exists = mother
								mother = {
									is_heir = yes
								}
							}
						}
					}
				}
				value = scope:recipient.age_in_years
				subtract = 20
				multiply = 5
			}
		}
		add = {
			value = scope:recipient.total_abilities
		}
	}
}
